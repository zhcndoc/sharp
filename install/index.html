<!DOCTYPE html><html lang="zh-CN" dir="ltr" data-theme="dark" data-has-toc data-has-sidebar class="astro-bguv2lll"> <head><meta charset="utf-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta http-equiv="Content-Security-Policy" content="default-src 'self'; connect-src 'self'; object-src 'none'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; script-src 'self' 'unsafe-inline' 'unsafe-eval' https://static.cloudflareinsights.com/beacon.min.js/;"/><title>安装  -  Sharp 中文文档</title><link rel="canonical" href="https://sharp.zhcndoc.com/install/"/><link rel="sitemap" href="/sitemap-index.xml"/><link rel="author" href="/humans.txt" type="text/plain"/><script defer src="https://www.zhcndoc.com/js/common.js"></script><script type="application/ld+json">{"@context":"https://schema.org","@type":"SoftwareSourceCode","name":"sharp","description":"高性能 Node.js 图像处理库","url":"https://sharp.zhcndoc.com","codeRepository":"https://github.com/lovell/sharp","programmingLanguage":["JavaScript","C++"],"runtimePlatform":"Node.js","copyrightHolder":{"@context":"https://schema.org","@type":"Person","name":"Lovell Fuller"},"copyrightYear":2013,"license":"https://www.apache.org/licenses/LICENSE-2.0"}</script><link rel="shortcut icon" href="/favicon.svg" type="image/svg+xml"/><meta name="generator" content="Astro v5.15.9"/><meta name="generator" content="Starlight v0.36.2"/><meta property="og:title" content="安装"/><meta property="og:type" content="article"/><meta property="og:url" content="https://sharp.zhcndoc.com/install/"/><meta property="og:locale" content="zh-CN"/><meta property="og:description" content="高性能 Node.js 图像处理。最快的模块用于调整 JPEG、PNG、WebP 和 TIFF 图像的大小。"/><meta property="og:site_name" content="Sharp 中文文档"/><meta name="twitter:card" content="summary_large_image"/><meta name="description" content="高性能 Node.js 图像处理。最快的模块用于调整 JPEG、PNG、WebP 和 TIFF 图像的大小。"/><script>
	window.StarlightThemeProvider = (() => {
		const storedTheme =
			typeof localStorage !== 'undefined' && localStorage.getItem('starlight-theme');
		const theme =
			storedTheme ||
			(window.matchMedia('(prefers-color-scheme: light)').matches ? 'light' : 'dark');
		document.documentElement.dataset.theme = theme === 'light' ? 'light' : 'dark';
		return {
			updatePickers(theme = storedTheme || 'auto') {
				document.querySelectorAll('starlight-theme-select').forEach((picker) => {
					const select = picker.querySelector('select');
					if (select) select.value = theme;
					/** @type {HTMLTemplateElement | null} */
					const tmpl = document.querySelector(`#theme-icons`);
					const newIcon = tmpl && tmpl.content.querySelector('.' + theme);
					if (newIcon) {
						const oldIcon = picker.querySelector('svg.label-icon');
						if (oldIcon) {
							oldIcon.replaceChildren(...newIcon.cloneNode(true).childNodes);
						}
					}
				});
			},
		};
	})();
</script><template id="theme-icons"><svg aria-hidden="true" class="light astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M5 12a1 1 0 0 0-1-1H3a1 1 0 0 0 0 2h1a1 1 0 0 0 1-1Zm.64 5-.71.71a1 1 0 0 0 0 1.41 1 1 0 0 0 1.41 0l.71-.71A1 1 0 0 0 5.64 17ZM12 5a1 1 0 0 0 1-1V3a1 1 0 0 0-2 0v1a1 1 0 0 0 1 1Zm5.66 2.34a1 1 0 0 0 .7-.29l.71-.71a1 1 0 1 0-1.41-1.41l-.66.71a1 1 0 0 0 0 1.41 1 1 0 0 0 .66.29Zm-12-.29a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.71-.71a1.004 1.004 0 1 0-1.43 1.41l.73.71ZM21 11h-1a1 1 0 0 0 0 2h1a1 1 0 0 0 0-2Zm-2.64 6A1 1 0 0 0 17 18.36l.71.71a1 1 0 0 0 1.41 0 1 1 0 0 0 0-1.41l-.76-.66ZM12 6.5a5.5 5.5 0 1 0 5.5 5.5A5.51 5.51 0 0 0 12 6.5Zm0 9a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7Zm0 3.5a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1a1 1 0 0 0-1-1Z"/></svg><svg aria-hidden="true" class="dark astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.64 13a1 1 0 0 0-1.05-.14 8.049 8.049 0 0 1-3.37.73 8.15 8.15 0 0 1-8.14-8.1 8.59 8.59 0 0 1 .25-2A1 1 0 0 0 8 2.36a10.14 10.14 0 1 0 14 11.69 1 1 0 0 0-.36-1.05Zm-9.5 6.69A8.14 8.14 0 0 1 7.08 5.22v.27a10.15 10.15 0 0 0 10.14 10.14 9.784 9.784 0 0 0 2.1-.22 8.11 8.11 0 0 1-7.18 4.32v-.04Z"/></svg><svg aria-hidden="true" class="auto astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg></template><link rel="stylesheet" href="/_astro/print.DNXP8c50.css" media="print"><link rel="stylesheet" href="/_astro/index.0FQvORdW.css"><script type="module" src="/_astro/page.B1D-nYk3.js"></script></head> <body class="astro-bguv2lll"> <a href="#_top" class="astro-7q3lir66">跳转到内容</a>  <div class="page sl-flex astro-vrdttmbt"> <header class="header astro-vrdttmbt"><div class="header astro-kmkmnagf"> <div class="title-wrapper sl-flex astro-kmkmnagf"> <a href="/" class="site-title sl-flex astro-m46x6ez3">  <img class="astro-m46x6ez3" alt="#" src="/_astro/sharp-logo.CiVIswaO.svg" width="550" height="550">  <span class="astro-m46x6ez3" translate="no"> Sharp 中文文档 </span> </a>  </div> <div class="sl-flex print:hidden astro-kmkmnagf"> <site-search class="astro-kmkmnagf astro-v37mnknz" data-translations="{&#34;placeholder&#34;:&#34;搜索&#34;}"> <button data-open-modal disabled aria-label="搜索" aria-keyshortcuts="Control+K" class="astro-v37mnknz"> <svg aria-hidden="true" class="astro-v37mnknz astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.71 20.29 18 16.61A9 9 0 1 0 16.61 18l3.68 3.68a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.39ZM11 18a7 7 0 1 1 0-14 7 7 0 0 1 0 14Z"/></svg> <span class="sl-hidden md:sl-block astro-v37mnknz" aria-hidden="true">搜索</span> <kbd class="sl-hidden md:sl-flex astro-v37mnknz" style="display: none;"> <kbd class="astro-v37mnknz">Ctrl</kbd><kbd class="astro-v37mnknz">K</kbd> </kbd> </button> <dialog style="padding:0" aria-label="搜索" class="astro-v37mnknz"> <div class="dialog-frame sl-flex astro-v37mnknz">  <button data-close-modal class="sl-flex md:sl-hidden astro-v37mnknz"> 取消 </button> <div class="search-container astro-v37mnknz"> <div id="starlight__search" class="astro-v37mnknz"></div> </div> </div> </dialog> </site-search>  <script>
	(() => {
		const openBtn = document.querySelector('button[data-open-modal]');
		const shortcut = openBtn?.querySelector('kbd');
		if (!openBtn || !(shortcut instanceof HTMLElement)) return;
		const platformKey = shortcut.querySelector('kbd');
		if (platformKey && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)) {
			platformKey.textContent = '⌘';
			openBtn.setAttribute('aria-keyshortcuts', 'Meta+K');
		}
		shortcut.style.display = '';
	})();
</script> <script type="module" src="/_astro/Search.astro_astro_type_script_index_0_lang.cjYDvRdi.js"></script>   </div> <div class="sl-hidden md:sl-flex print:hidden right-group astro-kmkmnagf"> <div class="sl-flex social-icons astro-kmkmnagf"> <a href="https://opencollective.com/libvips" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">Open Collective</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.86 5.17a11.94 11.94 0 0 1 0 13.66l-3.1-3.1a7.68 7.68 0 0 0 0-7.46l3.1-3.1Zm-3.03-3.03-3.1 3.1a7.71 7.71 0 1 0 0 13.51l3.1 3.11a12 12 0 1 1 0-19.73Z"/><path d="M21.86 5.17a11.94 11.94 0 0 1 0 13.66l-3.1-3.1a7.68 7.68 0 0 0 0-7.46l3.1-3.1Z"/></svg></a><a href="https://github.com/lovell/sharp" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择主题</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">深色</option><option value="light" class="astro-4yphtoen">浅色</option><option value="auto" selected class="astro-4yphtoen">自动</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script> <script type="module">const r="starlight-theme",o=e=>e==="auto"||e==="dark"||e==="light"?e:"auto",c=()=>o(typeof localStorage<"u"&&localStorage.getItem(r));function n(e){typeof localStorage<"u"&&localStorage.setItem(r,e==="light"||e==="dark"?e:"")}const l=()=>matchMedia("(prefers-color-scheme: light)").matches?"light":"dark";function t(e){StarlightThemeProvider.updatePickers(e),document.documentElement.dataset.theme=e==="auto"?l():e,n(e)}matchMedia("(prefers-color-scheme: light)").addEventListener("change",()=>{c()==="auto"&&t("auto")});class s extends HTMLElement{constructor(){super(),t(c()),this.querySelector("select")?.addEventListener("change",a=>{a.currentTarget instanceof HTMLSelectElement&&t(o(a.currentTarget.value))})}}customElements.define("starlight-theme-select",s);</script> <script type="module">class s extends HTMLElement{constructor(){super();const e=this.querySelector("select");e&&(e.addEventListener("change",t=>{t.currentTarget instanceof HTMLSelectElement&&(window.location.pathname=t.currentTarget.value)}),window.addEventListener("pageshow",t=>{if(!t.persisted)return;const n=e.querySelector("option[selected]")?.index;n!==e.selectedIndex&&(e.selectedIndex=n??0)}))}}customElements.define("starlight-lang-select",s);</script> </div> </div> </header> <nav class="sidebar print:hidden astro-vrdttmbt" aria-label="主要"> <starlight-menu-button class="print:hidden astro-jif73yzw"> <button aria-expanded="false" aria-label="菜单" aria-controls="starlight__sidebar" class="sl-flex md:sl-hidden astro-jif73yzw"> <svg aria-hidden="true" class="open-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M3 8h18a1 1 0 1 0 0-2H3a1 1 0 0 0 0 2Zm18 8H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Zm0-5H3a1 1 0 0 0 0 2h18a1 1 0 0 0 0-2Z"/></svg> <svg aria-hidden="true" class="close-menu astro-jif73yzw astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="m13.41 12 6.3-6.29a1.004 1.004 0 1 0-1.42-1.42L12 10.59l-6.29-6.3a1.004 1.004 0 0 0-1.42 1.42l6.3 6.29-6.3 6.29a1 1 0 0 0 0 1.42.998.998 0 0 0 1.42 0l6.29-6.3 6.29 6.3a.999.999 0 0 0 1.42 0 1 1 0 0 0 0-1.42L13.41 12Z"/></svg> </button> </starlight-menu-button> <script type="module">class s extends HTMLElement{constructor(){super(),this.btn=this.querySelector("button"),this.btn.addEventListener("click",()=>this.toggleExpanded());const t=this.closest("nav");t&&t.addEventListener("keyup",e=>this.closeOnEscape(e))}setExpanded(t){this.setAttribute("aria-expanded",String(t)),document.body.toggleAttribute("data-mobile-menu-expanded",t)}toggleExpanded(){this.setExpanded(this.getAttribute("aria-expanded")!=="true")}closeOnEscape(t){t.code==="Escape"&&(this.setExpanded(!1),this.btn.focus())}}customElements.define("starlight-menu-button",s);</script>   <div id="starlight__sidebar" class="sidebar-pane astro-vrdttmbt"> <div class="sidebar-content sl-flex astro-vrdttmbt"> <sl-sidebar-state-persist data-hash="0q6qkwk" class="astro-kku4brbg"> <script aria-hidden="true">
		(() => {
			try {
				if (!matchMedia('(min-width: 50em)').matches) return;
				/** @type {HTMLElement | null} */
				const target = document.querySelector('sl-sidebar-state-persist');
				const state = JSON.parse(sessionStorage.getItem('sl-sidebar-state') || '0');
				if (!target || !state || target.dataset.hash !== state.hash) return;
				window._starlightScrollRestore = state.scroll;
				customElements.define(
					'sl-sidebar-restore',
					class SidebarRestore extends HTMLElement {
						connectedCallback() {
							try {
								const idx = parseInt(this.dataset.index || '');
								const details = this.closest('details');
								if (details && typeof state.open[idx] === 'boolean') details.open = state.open[idx];
							} catch {}
						}
					}
				);
			} catch {}
		})();
	</script>  <ul class="top-level astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">首页</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/install/" aria-current="page" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">安装</span>  </a> </li><li class="astro-3ii7xxms"> <details open class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">API</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="0"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/api-constructor/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">构造函数</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-input/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">输入元数据</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-output/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">输出选项</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-resize/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">调整图像大小</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-composite/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">合成图像</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-operation/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">图像操作</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-colour/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">颜色操作</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-channel/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">频道操作</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/api-utility/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">全局属性</span>  </a> </li> </ul>  </details> </li><li class="astro-3ii7xxms"> <a href="/performance/" aria-current="false" class="large astro-3ii7xxms"> <span class="astro-3ii7xxms">性能</span>  </a> </li><li class="astro-3ii7xxms"> <details class="astro-3ii7xxms"> <summary class="astro-3ii7xxms"> <span class="group-label astro-3ii7xxms"> <span class="large astro-3ii7xxms">更新日志</span>  </span> <svg aria-hidden="true" class="caret astro-3ii7xxms astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.25rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg> </summary> <sl-sidebar-restore data-index="1"></sl-sidebar-restore> <ul class="astro-3ii7xxms"> <li class="astro-3ii7xxms"> <a href="/changelog/v0.34.5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.5 - 6th November 2025</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.34.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.4 - 17th September 2025</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.34.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.3 - 2025年7月10日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.34.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.2 - 2025年5月20日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.34.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.1 - 2025年4月7日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.34.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.34.0 - 2025年4月4日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.5 - 2024年8月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.4 - 2024年5月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.3 - 2024年3月23日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.2 - 2024年1月12日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.1 - 2023年12月17日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.33.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.33.0 - 2023年11月29日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.6/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.6 - 2023年9月18日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.5 - 2023年8月15日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.4 - 2023年7月21日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.3 - 2023年7月14日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.2 - 2023年7月11日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.1 - 2023年4月27日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.32.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.32.0 - 2023年3月24日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.31.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.31.3 - 2022年12月21日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.31.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.31.2 - 2022年11月4日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.31.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.31.1 - 2022年9月29日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.31.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.31.0 - 2022年9月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.7/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.7 - 2022年6月22日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.6/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.6 - 2022年5月30日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.5 - 2022年5月23日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.4 - 2022年4月18日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.3 - 2022年3月14日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.2 - 2022年3月2日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.1 - 2022年2月9日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.30.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.30.0 - 2022年2月1日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.29.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.29.3 - 2021年11月14日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.29.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.29.2 - 2021年10月21日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.29.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.29.1 - 2021年9月7日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.29.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.29.0 - 2021年8月17日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.28.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.28.3 - 2021年5月24日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.28.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.28.2 - 2021年5月10日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.28.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.28.1 - 2021年4月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.28.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.28.0 - 2021年3月29日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.27.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.27.2 - 2021年2月22日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.27.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.27.1 - 2021年1月27日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.27.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.27.0 - 2020年12月22日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.26.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.26.3 - 2020年11月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.26.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.26.2 - 2020年10月14日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.26.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.26.1 - 2020年9月20日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.26.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.26.0 - 2020年8月25日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.25.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.25.4 - 2020年6月12日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.25.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.25.3 - 2020年5月17日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.25.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.25.2 - 2020年3月20日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.25.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.25.1 - 2020年3月7日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.25.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.25.0 - 2020年3月7日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.24.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.24.1 - 2020年2月15日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.24.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.24.0 - 2020年1月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.23.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.23.4 - 2019年12月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.23.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.23.3 - 2019年11月17日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.23.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.23.2 - 2019年10月28日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.23.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.23.1 - 2019年9月26日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.23.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.23.0 - 2019年7月29日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.22.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.22.1 - 2019年4月25日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.22.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.22.0 - 2019年3月18日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.21.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.21.3 - 2019年1月19日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.21.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.21.2 - 2019年1月13日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.21.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.21.1 - 2018年12月7日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.21.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.21.0 - 2018年10月4日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.8/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.8 - 2018年9月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.7/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.7 - 2018年8月21日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.6/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.6 - 2018年8月20日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.5/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.5 - 2018年6月27日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.4 - 2018年6月20日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.3 - 2018年5月29日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.2 - 2018年4月28日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.1 - 2018年3月17日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.20.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.20.0 - 2018年3月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.19.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.19.1 - 2018年2月24日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.19.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.19.0 - 2018年1月11日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.18.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.18.4 - 2017年9月18日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.18.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.18.3 - 2017年9月13日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.18.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.18.2 - 2017年7月1日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.18.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.18.1 - 2017年5月30日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.18.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.18.0 - 2017年5月30日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.17.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.17.3 - 2017年4月1日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.17.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.17.2 - 2017年2月11日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.17.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.17.1 - 2017年1月15日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.17.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.17.0 - 2016年12月11日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.16.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.16.2 - 2016年10月22日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.16.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.16.1 - 2016年10月13日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.16.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.16.0 - 2016年8月18日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.15.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.15.1 - 2016年7月12日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.15.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.15.0 - 2016年5月21日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.14.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.14.1 - 2016年4月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.14.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.14.0 - 2016年4月2日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.13.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.13.1 - 2016年2月27日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.13.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.13.0 - 2016年2月15日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.12.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.12.2 - 2016年1月16日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.12.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.12.1 - 2015年12月12日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.12.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.12.0 - 2015年11月23日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.11.4/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.11.4 - 2015年11月5日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.11.3/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.11.3 - 2015年9月8日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.11.2/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.11.2 - 2015年8月28日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.11.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.11.1 - 2015年8月12日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.11.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.11.0 - 2015年7月15日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.10.1/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.10.1 - 2015年6月1日</span>  </a> </li><li class="astro-3ii7xxms"> <a href="/changelog/v0.10.0/" aria-current="false" class="astro-3ii7xxms"> <span class="astro-3ii7xxms">v0.10.0 - 2015年4月23日</span>  </a> </li> </ul>  </details> </li> </ul>   <script aria-hidden="true">
		(() => {
			const scroller = document.getElementById('starlight__sidebar');
			if (!window._starlightScrollRestore || !scroller) return;
			scroller.scrollTop = window._starlightScrollRestore;
			delete window._starlightScrollRestore;
		})();
	</script> </sl-sidebar-state-persist>  <div class="md:sl-hidden"> <div class="mobile-preferences sl-flex astro-wu23bvmt"> <div class="social-icons astro-wu23bvmt"> <a href="https://opencollective.com/libvips" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">Open Collective</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21.86 5.17a11.94 11.94 0 0 1 0 13.66l-3.1-3.1a7.68 7.68 0 0 0 0-7.46l3.1-3.1Zm-3.03-3.03-3.1 3.1a7.71 7.71 0 1 0 0 13.51l3.1 3.11a12 12 0 1 1 0-19.73Z"/><path d="M21.86 5.17a11.94 11.94 0 0 1 0 13.66l-3.1-3.1a7.68 7.68 0 0 0 0-7.46l3.1-3.1Z"/></svg></a><a href="https://github.com/lovell/sharp" rel="me" class="sl-flex astro-wy4te6ga"><span class="sr-only astro-wy4te6ga">GitHub</span><svg aria-hidden="true" class="astro-wy4te6ga astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M12 .3a12 12 0 0 0-3.8 23.38c.6.12.83-.26.83-.57L9 21.07c-3.34.72-4.04-1.61-4.04-1.61-.55-1.39-1.34-1.76-1.34-1.76-1.08-.74.09-.73.09-.73 1.2.09 1.83 1.24 1.83 1.24 1.08 1.83 2.81 1.3 3.5 1 .1-.78.42-1.31.76-1.61-2.67-.3-5.47-1.33-5.47-5.93 0-1.31.47-2.38 1.24-3.22-.14-.3-.54-1.52.1-3.18 0 0 1-.32 3.3 1.23a11.5 11.5 0 0 1 6 0c2.28-1.55 3.29-1.23 3.29-1.23.64 1.66.24 2.88.12 3.18a4.65 4.65 0 0 1 1.23 3.22c0 4.61-2.8 5.63-5.48 5.92.42.36.81 1.1.81 2.22l-.01 3.29c0 .31.2.69.82.57A12 12 0 0 0 12 .3Z"/></svg></a> </div> <starlight-theme-select>  <label style="--sl-select-width: 6.25em" class="astro-4yphtoen"> <span class="sr-only astro-4yphtoen">选择主题</span> <svg aria-hidden="true" class="icon label-icon astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M21 14h-1V7a3 3 0 0 0-3-3H7a3 3 0 0 0-3 3v7H3a1 1 0 0 0-1 1v2a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3v-2a1 1 0 0 0-1-1ZM6 7a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v7H6V7Zm14 10a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-1h16v1Z"/></svg> <select autocomplete="off" class="astro-4yphtoen"> <option value="dark" class="astro-4yphtoen">深色</option><option value="light" class="astro-4yphtoen">浅色</option><option value="auto" selected class="astro-4yphtoen">自动</option> </select> <svg aria-hidden="true" class="icon caret astro-4yphtoen astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1em;"><path d="M17 9.17a1 1 0 0 0-1.41 0L12 12.71 8.46 9.17a1 1 0 1 0-1.41 1.42l4.24 4.24a1.002 1.002 0 0 0 1.42 0L17 10.59a1.002 1.002 0 0 0 0-1.42Z"/></svg> </label>  </starlight-theme-select>  <script>
	StarlightThemeProvider.updatePickers();
</script>   </div>  </div> </div> </div> </nav> <div class="main-frame astro-vrdttmbt">  <script type="module">const a=document.getElementById("starlight__sidebar"),n=a?.querySelector("sl-sidebar-state-persist"),o="sl-sidebar-state",i=()=>{let t=[];const e=n?.dataset.hash||"";try{const s=sessionStorage.getItem(o),r=JSON.parse(s||"{}");Array.isArray(r.open)&&r.hash===e&&(t=r.open)}catch{}return{hash:e,open:t,scroll:a?.scrollTop||0}},c=t=>{try{sessionStorage.setItem(o,JSON.stringify(t))}catch{}},d=()=>c(i()),l=(t,e)=>{const s=i();s.open[e]=t,c(s)};n?.addEventListener("click",t=>{if(!(t.target instanceof Element))return;const e=t.target.closest("summary")?.closest("details");if(!e)return;const s=e.querySelector("sl-sidebar-restore"),r=parseInt(s?.dataset.index||"");isNaN(r)||l(!e.open,r)});addEventListener("visibilitychange",()=>{document.visibilityState==="hidden"&&d()});addEventListener("pageHide",d);</script> <div class="lg:sl-flex astro-67yu43on"> <aside class="right-sidebar-container print:hidden astro-67yu43on"> <div class="right-sidebar astro-67yu43on"> <div class="lg:sl-hidden astro-pb3aqygn"><mobile-starlight-toc data-min-h="2" data-max-h="3" class="astro-doynk5tl"><nav aria-labelledby="starlight__on-this-page--mobile" class="astro-doynk5tl"><details id="starlight__mobile-toc" class="astro-doynk5tl"><summary id="starlight__on-this-page--mobile" class="sl-flex astro-doynk5tl"><span class="toggle sl-flex astro-doynk5tl">本页内容<svg aria-hidden="true" class="caret astro-doynk5tl astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1rem;"><path d="m14.83 11.29-4.24-4.24a1 1 0 1 0-1.42 1.41L12.71 12l-3.54 3.54a1 1 0 0 0 0 1.41 1 1 0 0 0 .71.29 1 1 0 0 0 .71-.29l4.24-4.24a1.002 1.002 0 0 0 0-1.42Z"/></svg></span><span class="display-current astro-doynk5tl"></span></summary><div class="dropdown astro-doynk5tl"><ul class="isMobile astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">概述</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#先决条件" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">先决条件</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#预编译二进制文件" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">预编译二进制文件</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#跨平台" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">跨平台</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#npm-v10" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">npm v10+</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#yarn-v3" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">yarn v3+</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pnpm-v8" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">pnpm v8+</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#自定义-libvips" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">自定义 libvips</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#从源代码构建" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">从源代码构建</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#webassembly" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">WebAssembly</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#freebsd" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">FreeBSD</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#linux-内存分配器" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Linux 内存分配器</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#aws-lambda" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">AWS Lambda</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#打包工具" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">打包工具</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#webpack" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">webpack</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#esbuild" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">esbuild</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#electron" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">electron</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#vite" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">vite</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#typescript" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">TypeScript</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#字体" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">字体</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#已知冲突" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">已知冲突</span> </a> <ul class="isMobile astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#canvas-和-windows" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Canvas 和 Windows</span> </a>  </li> </ul>  </li> </ul> </div></details></nav></mobile-starlight-toc><script type="module" src="/_astro/MobileTableOfContents.astro_astro_type_script_index_0_lang.C181hMzK.js"></script></div><div class="right-sidebar-panel sl-hidden lg:sl-block astro-pb3aqygn"><div class="sl-container astro-pb3aqygn"><starlight-toc data-min-h="2" data-max-h="3"><nav aria-labelledby="starlight__on-this-page"><h2 id="starlight__on-this-page">本页内容</h2><ul class="astro-g2bywc46" style="--depth: 0;"> <li class="astro-g2bywc46" style="--depth: 0;"> <a href="#_top" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">概述</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#先决条件" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">先决条件</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#预编译二进制文件" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">预编译二进制文件</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#跨平台" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">跨平台</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#npm-v10" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">npm v10+</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#yarn-v3" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">yarn v3+</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#pnpm-v8" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">pnpm v8+</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#自定义-libvips" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">自定义 libvips</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#从源代码构建" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">从源代码构建</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#webassembly" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">WebAssembly</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#freebsd" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">FreeBSD</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#linux-内存分配器" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">Linux 内存分配器</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#aws-lambda" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">AWS Lambda</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#打包工具" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">打包工具</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#webpack" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">webpack</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#esbuild" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">esbuild</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#electron" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">electron</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 1;"> <a href="#vite" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">vite</span> </a>  </li> </ul>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#typescript" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">TypeScript</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#字体" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">字体</span> </a>  </li><li class="astro-g2bywc46" style="--depth: 0;"> <a href="#已知冲突" class="astro-g2bywc46" style="--depth: 0;"> <span class="astro-g2bywc46" style="--depth: 0;">已知冲突</span> </a> <ul class="astro-g2bywc46" style="--depth: 1;"> <li class="astro-g2bywc46" style="--depth: 1;"> <a href="#canvas-和-windows" class="astro-g2bywc46" style="--depth: 1;"> <span class="astro-g2bywc46" style="--depth: 1;">Canvas 和 Windows</span> </a>  </li> </ul>  </li> </ul> </nav></starlight-toc><script type="module" src="/_astro/TableOfContents.astro_astro_type_script_index_0_lang.CKWWgpjV.js"></script></div></div> </div> </aside> <div class="main-pane astro-67yu43on">  <main data-pagefind-body class="astro-bguv2lll" lang="zh-CN" dir="ltr">    <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <h1 id="_top" class="astro-j6tvhyss">安装</h1>  </div> </div>  <div class="content-panel astro-7nkwcw3z"> <div class="sl-container astro-7nkwcw3z"> <div class="sl-markdown-content"> <p>支持您选择的任意 JavaScript 包管理器。</p>
<aside aria-label="谨慎" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>谨慎</p><div class="starlight-aside__content"><p>请确保您的包管理器已配置为安装可选依赖项</p></div></aside>
<p>如果包管理器的锁定文件必须支持多个平台，
请参阅 <a href="#cross-platform">跨平台</a> 部分
以帮助决定使用哪个包管理器更合适。</p>
<div class="expressive-code"><link rel="stylesheet" href="/_astro/ec.v4551.css"><script type="module" src="/_astro/ec.p1z7b.js"></script><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install sharp"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">pnpm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pnpm add sharp"><div></div></button></div></figure></div>
<p>在使用 <code dir="auto">pnpm</code> 时，将 <code dir="auto">sharp</code> 添加到 <a href="https://pnpm.io/settings#ignoredbuiltdependencies">ignoredBuiltDependencies</a> 以消除警告。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">yarn</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="yarn add sharp"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">bun</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="bun add sharp"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">deno</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">add</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--quiet</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">npm:sharp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">deno</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">run</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--allow-env</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--allow-ffi</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--allow-read</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--allow-sys</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">...</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="deno add --quiet npm:sharpdeno run --allow-env --allow-ffi --allow-read --allow-sys ..."><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="先决条件">先决条件</h2><a class="sl-anchor-link" href="#先决条件"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “先决条件”</span></a></div>
<ul>
<li>兼容 Node-API v9 的运行时环境，例如 Node.js ^18.17.0 或 >=20.3.0。</li>
</ul>
<div class="sl-heading-wrapper level-h2"><h2 id="预编译二进制文件">预编译二进制文件</h2><a class="sl-anchor-link" href="#预编译二进制文件"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “预编译二进制文件”</span></a></div>
<p>为最常用的平台提供了预编译的 sharp 和 libvips 二进制文件：</p>
<ul>
<li>macOS x64 (>= 10.15)</li>
<li>macOS ARM64</li>
<li>Linux ARM (glibc >= 2.31)</li>
<li>Linux ARM64 (glibc >= 2.26, musl >= 1.2.2)</li>
<li>Linux RISC-V 64-bit (glibc >= 2.41)</li>
<li>Linux ppc64 (glibc >= 2.36)</li>
<li>Linux s390x (glibc >= 2.36)</li>
<li>Linux x64 (glibc >= 2.26, musl >= 1.2.2, 具备 SSE4.2 的 CPU)</li>
<li>Windows x64</li>
<li>Windows x86</li>
<li>Windows ARM64（实验性，所有功能需 CPU 支持 ARMv8.4）</li>
</ul>
<p>这提供了对 JPEG、PNG、WebP、AVIF（仅限 8 位深度）、TIFF、GIF 和 SVG（输入格式）图像格式的支持。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="跨平台">跨平台</h2><a class="sl-anchor-link" href="#跨平台"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “跨平台”</span></a></div>
<p>安装时，包管理器会自动针对当前操作系统平台和 CPU 架构选择预编译二进制文件（如果有可用）。</p>
<p>部分包管理器支持在同一安装树和/或使用同一锁定文件下，支持多平台和多架构。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="npm-v10">npm v10+</h3><a class="sl-anchor-link" href="#npm-v10"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “npm v10+”</span></a></div>
<aside aria-label="谨慎" class="starlight-aside starlight-aside--caution"><p class="starlight-aside__title" aria-hidden="true"><svg viewBox="0 0 24 24" width="16" height="16" fill="currentColor" class="starlight-aside__icon"><path d="M12 16C11.8022 16 11.6089 16.0587 11.4444 16.1686C11.28 16.2784 11.1518 16.4346 11.0761 16.6173C11.0004 16.8001 10.9806 17.0011 11.0192 17.1951C11.0578 17.3891 11.153 17.5673 11.2929 17.7071C11.4327 17.847 11.6109 17.9422 11.8049 17.9808C11.9989 18.0194 12.2 17.9996 12.3827 17.9239C12.5654 17.8482 12.7216 17.72 12.8315 17.5556C12.9413 17.3911 13 17.1978 13 17C13 16.7348 12.8946 16.4805 12.7071 16.2929C12.5196 16.1054 12.2652 16 12 16ZM22.67 17.47L14.62 3.47003C14.3598 3.00354 13.9798 2.61498 13.5192 2.3445C13.0586 2.07401 12.5341 1.9314 12 1.9314C11.4659 1.9314 10.9414 2.07401 10.4808 2.3445C10.0202 2.61498 9.64019 3.00354 9.38 3.47003L1.38 17.47C1.11079 17.924 0.966141 18.441 0.960643 18.9688C0.955144 19.4966 1.089 20.0166 1.34868 20.4761C1.60837 20.9356 1.9847 21.3185 2.43968 21.5861C2.89466 21.8536 3.41218 21.9964 3.94 22H20.06C20.5921 22.0053 21.1159 21.8689 21.5779 21.6049C22.0399 21.341 22.4234 20.9589 22.689 20.4978C22.9546 20.0368 23.0928 19.5134 23.0895 18.9814C23.0862 18.4493 22.9414 17.9277 22.67 17.47ZM20.94 19.47C20.8523 19.626 20.7245 19.7556 20.5697 19.8453C20.4149 19.935 20.2389 19.9815 20.06 19.98H3.94C3.76111 19.9815 3.5851 19.935 3.43032 19.8453C3.27553 19.7556 3.14765 19.626 3.06 19.47C2.97223 19.318 2.92602 19.1456 2.92602 18.97C2.92602 18.7945 2.97223 18.622 3.06 18.47L11.06 4.47003C11.1439 4.30623 11.2714 4.16876 11.4284 4.07277C11.5855 3.97678 11.766 3.92599 11.95 3.92599C12.134 3.92599 12.3145 3.97678 12.4716 4.07277C12.6286 4.16876 12.7561 4.30623 12.84 4.47003L20.89 18.47C20.9892 18.6199 21.0462 18.7937 21.055 18.9732C21.0638 19.1527 21.0241 19.3312 20.94 19.49V19.47ZM12 8.00003C11.7348 8.00003 11.4804 8.10538 11.2929 8.29292C11.1054 8.48046 11 8.73481 11 9.00003V13C11 13.2652 11.1054 13.5196 11.2929 13.7071C11.4804 13.8947 11.7348 14 12 14C12.2652 14 12.5196 13.8947 12.7071 13.7071C12.8946 13.5196 13 13.2652 13 13V9.00003C13 8.73481 12.8946 8.48046 12.7071 8.29292C12.5196 8.10538 12.2652 8.00003 12 8.00003Z"></path></svg>谨慎</p><div class="starlight-aside__content"><p>多平台共享的 npm <code dir="auto">package-lock.json</code> 文件可能会因 <a href="https://github.com/npm/cli/issues/4828">npm bug #4828</a> 导致安装问题</p></div></aside>
<p>通过 <code dir="auto">--os</code>、<code dir="auto">--cpu</code> 和 <code dir="auto">--libc</code> 标志提供有限支持。</p>
<p>要支持搭载 Intel x64 和 ARM64 CPU 的 macOS：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--cpu=x64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--os=darwin</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--cpu=arm64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--os=darwin</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install --cpu=x64 --os=darwin sharpnpm install --cpu=arm64 --os=darwin sharp"><div></div></button></div></figure></div>
<p>当交叉目标为 Linux 时，必须指定 C 标准库。</p>
<p>要支持搭载 Intel x64 CPU 的 glibc（例如 Debian）和 musl（例如 Alpine）Linux：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--cpu=x64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--os=linux</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--libc=glibc</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--cpu=x64</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--os=linux</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--libc=musl</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install --cpu=x64 --os=linux --libc=glibc sharpnpm install --cpu=x64 --os=linux --libc=musl sharp"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="yarn-v3">yarn v3+</h3><a class="sl-anchor-link" href="#yarn-v3"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “yarn v3+”</span></a></div>
<p>使用 <a href="https://yarnpkg.com/configuration/yarnrc#supportedArchitectures">supportedArchitectures</a> 配置。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="pnpm-v8">pnpm v8+</h3><a class="sl-anchor-link" href="#pnpm-v8"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “pnpm v8+”</span></a></div>
<p>使用 <a href="https://pnpm.io/settings#supportedarchitectures">supportedArchitectures</a> 配置。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="自定义-libvips">自定义 libvips</h2><a class="sl-anchor-link" href="#自定义-libvips"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “自定义 libvips”</span></a></div>
<p>若要使用自定义的全局安装版本 libvips 替代所提供的二进制文件，
请确保其版本至少为 <code dir="auto">package.json</code> 中 <code dir="auto">config.libvips</code> 标明的版本，
且可通过 <code dir="auto">pkg-config --modversion vips-cpp</code> 定位。</p>
<p>有关编译 libvips 及其依赖的帮助，请参阅
<a href="https://www.libvips.org/install.html#building-libvips-from-source">从源代码构建 libvips</a>。</p>
<p>在 Windows 平台及在 macOS 上通过 Rosetta 运行 Node.js 时，不支持使用全局安装的 libvips。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="从源代码构建">从源代码构建</h2><a class="sl-anchor-link" href="#从源代码构建"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “从源代码构建”</span></a></div>
<p>当出现以下情况时，此模块将从源代码编译：</p>
<ul>
<li>检测到全局安装的 libvips，或</li>
<li>使用 <code dir="auto">npm explore sharp -- npm run build</code>，或</li>
<li>在 <code dir="auto">npm install</code> 时使用已弃用的 <code dir="auto">npm run --build-from-source</code>。</li>
</ul>
<p>检测全局安装 libvips 的逻辑可通过设置环境变量进行跳过：
<code dir="auto">SHARP_IGNORE_GLOBAL_LIBVIPS</code>（永远不尝试使用）或
<code dir="auto">SHARP_FORCE_GLOBAL_LIBVIPS</code>（始终尝试使用，即使缺失或版本过旧）。</p>
<p>从源码构建需要：</p>
<ul>
<li>C++17 编译器</li>
<li>版本 7 及以上的 <a href="https://www.npmjs.com/package/node-addon-api">node-addon-api</a></li>
<li>版本 9 及以上的 <a href="https://github.com/nodejs/node-gyp#installation">node-gyp</a> 及其依赖</li>
</ul>
<p>安装时会检查这些依赖。
如果找不到 <code dir="auto">node-addon-api</code> 或 <code dir="auto">node-gyp</code>，尝试通过以下命令添加：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--save</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">node-addon-api</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">node-gyp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install --save node-addon-api node-gyp"><div></div></button></div></figure></div>
<p>使用 <code dir="auto">pnpm</code> 时，您可能需要将 <code dir="auto">sharp</code> 添加到
<a href="https://pnpm.io/settings#onlybuiltdependencies">onlyBuiltDependencies</a>
以确保安装脚本能运行。</p>
<p>对于交叉编译，可以使用 npm 标志 <code dir="auto">--platform</code>、<code dir="auto">--arch</code> 和 <code dir="auto">--libc</code>
（或环境变量 <code dir="auto">npm_config_platform</code>、<code dir="auto">npm_config_arch</code> 和 <code dir="auto">npm_config_libc</code>）
来配置目标环境。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="webassembly">WebAssembly</h2><a class="sl-anchor-link" href="#webassembly"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “WebAssembly”</span></a></div>
<p>为支持通过 Worker 提供多线程 Wasm 的运行时环境提供实验性支持。</p>
<p>不支持在网页浏览器中使用。</p>
<p>不支持本地文本渲染。</p>
<p>不支持<a href="/api-output#tile">基于瓦片的输出</a>。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">npm</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--cpu=wasm32</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="npm install --cpu=wasm32 sharp"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="freebsd">FreeBSD</h2><a class="sl-anchor-link" href="#freebsd"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “FreeBSD”</span></a></div>
<p>必须先安装 <code dir="auto">vips</code> 包，然后再运行 <code dir="auto">npm install</code>，此外还需安装额外的<a href="#building-from-source">从源代码构建</a>依赖。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">pkg</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">-y</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">pkgconf</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">vips</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="pkg install -y pkgconf vips"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#C5E478;--1:#3B61B0">cd</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">/usr/ports/graphics/vips/</span><span style="--0:#D6DEEB;--1:#403F53"> &#x26;&#x26; </span><span style="--0:#82AAFF;--1:#3B61B0">make</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">install</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">clean</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="cd /usr/ports/graphics/vips/ &#x26;&#x26; make install clean"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="linux-内存分配器">Linux 内存分配器</h2><a class="sl-anchor-link" href="#linux-内存分配器"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Linux 内存分配器”</span></a></div>
<p>大多数基于 glibc 的 Linux 系统
（例如 Debian、Red Hat）默认的内存分配器不适合长时间运行的多线程进程，
且涉及大量小内存分配。</p>
<p>因此，默认为防止碎片，sharp 在运行时检测到 glibc 分配器时
会限制线程基础的 <a href="/api-utility#concurrency">并发</a> 使用。</p>
<p>为帮助减少碎片并提升性能，推荐在这些系统使用替代的内存分配器，如
<a href="https://github.com/jemalloc/jemalloc">jemalloc</a>。</p>
<p>使用 musl 的 Linux（如 Alpine）和非 Linux 系统不受影响。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="aws-lambda">AWS Lambda</h2><a class="sl-anchor-link" href="#aws-lambda"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “AWS Lambda”</span></a></div>
<p>部署包的 <code dir="auto">node_modules</code> 目录必须包含对应所选架构的 linux-x64 或 linux-arm64 平台的二进制文件。</p>
<p>当在与目标架构不同的机器上构建部署包时，
请参考<a href="#cross-platform">跨平台</a> 部分帮助确定合适的包管理器并进行配置。</p>
<p>部分包管理器会使用符号链接，
但 AWS Lambda 不支持部署包中的符号链接。</p>
<p>为获得最佳性能，选择最大可用内存。
1536 MB 的函数提供约 12 倍于 128 MB 函数的 CPU 时间。</p>
<p>与 AWS API Gateway 集成时，确保配置了相关
<a href="https://docs.aws.amazon.com/apigateway/latest/developerguide/api-gateway-payload-encodings.html">二进制媒体类型</a>。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="打包工具">打包工具</h2><a class="sl-anchor-link" href="#打包工具"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “打包工具”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="webpack">webpack</h3><a class="sl-anchor-link" href="#webpack"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “webpack”</span></a></div>
<p>确保通过
<a href="https://webpack.js.org/configuration/externals/">externals</a>
配置将 sharp 排除在打包之外。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">externals: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">sharp</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">commonjs sharp</span><span style="--0:#D9F5DD;--1:#111111">'</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="externals: {  &#x27;sharp&#x27;: &#x27;commonjs sharp&#x27;}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="esbuild">esbuild</h3><a class="sl-anchor-link" href="#esbuild"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “esbuild”</span></a></div>
<p>确保通过
<a href="https://esbuild.github.io/api/#external">external</a>
配置将 sharp 排除在打包之外。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">buildSync</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">entryPoints: [</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">app.js</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">bundle: </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">platform: </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">node</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">external: [</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">sharp</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">],</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">})</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="buildSync({  entryPoints: [&#x27;app.js&#x27;],  bundle: true,  platform: &#x27;node&#x27;,  external: [&#x27;sharp&#x27;],})"><div></div></button></div></figure></div>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="sh"><code><div class="ec-line"><div class="code"><span style="--0:#82AAFF;--1:#3B61B0">esbuild</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#ECC48D;--1:#3B61B0">app.js</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--bundle</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--platform=node</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">--external:sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="esbuild app.js --bundle --platform=node --external:sharp"><div></div></button></div></figure></div>
<p>对于 <code dir="auto">serverless-esbuild</code>，确保通过 <code dir="auto">serverless.yml</code> 配置安装特定平台的二进制文件。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="yaml"><code><div class="ec-line"><div class="code"><span style="--0:#7FDBCA;--1:#111111">custom</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#111111">esbuild</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">external</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#ECC48D;--1:#3B61B0">sharp</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#111111">packagerOptions</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#111111">scripts</span><span style="--0:#D6DEEB;--1:#403F53">:</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">        </span></span><span style="--0:#D6DEEB;--1:#403F53">- </span><span style="--0:#ECC48D;--1:#3B61B0">npm install --os=linux --cpu=x64 sharp</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="custom:  esbuild:    external:      - sharp    packagerOptions:      scripts:        - npm install --os=linux --cpu=x64 sharp"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h3"><h3 id="electron">electron</h3><a class="sl-anchor-link" href="#electron"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “electron”</span></a></div>
<div class="sl-heading-wrapper level-h4"><h4 id="electron-builder">electron-builder</h4><a class="sl-anchor-link" href="#electron-builder"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “electron-builder”</span></a></div>
<p>确保使用
<a href="https://www.electron.build/app-builder-lib.interface.platformspecificbuildoptions#asarunpack">asarUnpack</a>
选项将 <code dir="auto">sharp</code> 从 ASAR 归档文件中解包。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"build"</span><span style="--0:#D6DEEB;--1:#403F53">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">"asar"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#FF6A83;--1:#A24848">true</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">"asarUnpack"</span><span style="--0:#D6DEEB;--1:#403F53">: [</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">**/node_modules/sharp/**/*</span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#D6DEEB;--1:#403F53">,</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">**/node_modules/@img/**/*</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;build&#x22;: {    &#x22;asar&#x22;: true,    &#x22;asarUnpack&#x22;: [      &#x22;**/node_modules/sharp/**/*&#x22;,      &#x22;**/node_modules/@img/**/*&#x22;    ]  }}"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h4"><h4 id="electron-forge">electron-forge</h4><a class="sl-anchor-link" href="#electron-forge"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “electron-forge”</span></a></div>
<p>确保使用
<a href="https://js.electronforge.io/interfaces/_electron_forge_maker_squirrel.InternalOptions.Options.html#asar">unpack</a>
选项将 <code dir="auto">sharp</code> 从 ASAR 归档文件中解包。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="json"><code><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">{</span></div></div><div class="ec-line"><div class="code"><span class="indent">  </span><span style="--0:#7FDBCA;--1:#096E72">"packagerConfig"</span><span style="--0:#D6DEEB;--1:#403F53">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">    </span><span style="--0:#7FDBCA;--1:#096E72">"asar"</span><span style="--0:#D6DEEB;--1:#403F53">: {</span></div></div><div class="ec-line"><div class="code"><span class="indent">      </span><span style="--0:#7FDBCA;--1:#096E72">"unpack"</span><span style="--0:#D6DEEB;--1:#403F53">: </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#C789D6;--1:#7C5686">**/node_modules/{sharp,@img}/**/*</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="{  &#x22;packagerConfig&#x22;: {    &#x22;asar&#x22;: {      &#x22;unpack&#x22;: &#x22;**/node_modules/{sharp,@img}/**/*&#x22;    }  }}"><div></div></button></div></figure></div>
<p>使用带有 <a href="#webpack">Webpack</a> 的 <code dir="auto">electron-forge</code> 时，
您可能还需要添加
<a href="https://www.npmjs.com/package/@timfish/forge-externals-plugin">forge-externals-plugin</a>。</p>
<div class="sl-heading-wrapper level-h3"><h3 id="vite">vite</h3><a class="sl-anchor-link" href="#vite"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “vite”</span></a></div>
<p>确保通过
<a href="https://vitejs.dev/config/build-options.html">build.rollupOptions</a>
配置将 <code dir="auto">sharp</code> 排除在打包之外。</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="js"><code><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">import</span><span style="--0:#D6DEEB;--1:#403F53"> { defineConfig } </span><span style="--0:#C792EA;--1:#8844AE">from</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#ECC48D;--1:#984E4D">vite</span><span style="--0:#D9F5DD;--1:#111111">'</span><span style="--0:#D6DEEB;--1:#403F53">;</span></div></div><div class="ec-line"><div class="code">
</div></div><div class="ec-line"><div class="code"><span style="--0:#C792EA;--1:#8844AE">export</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#C792EA;--1:#8844AE">default</span><span style="--0:#D6DEEB;--1:#403F53"> </span><span style="--0:#82AAFF;--1:#3B61B0">defineConfig</span><span style="--0:#D6DEEB;--1:#403F53">({</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">build: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">rollupOptions: {</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">external: [</span></div></div><div class="ec-line"><div class="code"><span class="indent">        </span><span style="--0:#D9F5DD;--1:#111111">"</span><span style="--0:#ECC48D;--1:#984E4D">sharp</span><span style="--0:#D9F5DD;--1:#111111">"</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">      </span></span><span style="--0:#D6DEEB;--1:#403F53">]</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">    </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span class="indent"><span style="--0:#D6DEEB;--1:#403F53">  </span></span><span style="--0:#D6DEEB;--1:#403F53">}</span></div></div><div class="ec-line"><div class="code"><span style="--0:#D6DEEB;--1:#403F53">});</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="import { defineConfig } from &#x27;vite&#x27;;export default defineConfig({  build: {    rollupOptions: {      external: [        &#x22;sharp&#x22;      ]    }  }});"><div></div></button></div></figure></div>
<div class="sl-heading-wrapper level-h2"><h2 id="typescript">TypeScript</h2><a class="sl-anchor-link" href="#typescript"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “TypeScript”</span></a></div>
<p>自 v0.32.0 版本起，TypeScript 类型定义作为 <code dir="auto">sharp</code> 包的一部分发布。</p>
<p>早期版本通过 <code dir="auto">@types/sharp</code> 包提供，现已弃用。</p>
<p>使用 TypeScript 时，请确保 <code dir="auto">devDependencies</code> 中包含 <code dir="auto">@types/node</code> 包。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="字体">字体</h2><a class="sl-anchor-link" href="#字体"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “字体”</span></a></div>
<p>创建文本图像或渲染包含文本元素的 SVG 图像时，
使用 <code dir="auto">fontconfig</code> 查找相关字体。</p>
<p>在 Windows 和 macOS 系统上，所有系统字体均可使用。</p>
<p>在使用 Homebrew 的 macOS 系统上，您可能需要将
<code dir="auto">PANGOCAIRO_BACKEND</code> 环境变量设置为 <code dir="auto">fontconfig</code>
以确保使用它进行字体查找，而非 Core Text。</p>
<p>在 Linux 系统上，通过包管理器安装且包含相关
<a href="https://www.freedesktop.org/software/fontconfig/fontconfig-user.html"><code dir="auto">fontconfig</code> 配置</a>的字体可用。</p>
<p>如果找不到 <code dir="auto">fontconfig</code> 配置，将出现以下错误：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">Fontconfig error: Cannot load default config file</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="Fontconfig error: Cannot load default config file"><div></div></button></div></figure></div>
<p>在无法控制字体包的无服务器环境中，
请使用 <code dir="auto">FONTCONFIG_PATH</code> 环境变量指向自定义路径。</p>
<p>嵌入式 SVG 字体不被支持。</p>
<div class="sl-heading-wrapper level-h2"><h2 id="已知冲突">已知冲突</h2><a class="sl-anchor-link" href="#已知冲突"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “已知冲突”</span></a></div>
<div class="sl-heading-wrapper level-h3"><h3 id="canvas-和-windows">Canvas 和 Windows</h3><a class="sl-anchor-link" href="#canvas-和-windows"><span aria-hidden="true" class="sl-anchor-icon"><svg width="16" height="16" viewBox="0 0 24 24"><path fill="currentcolor" d="m12.11 15.39-3.88 3.88a2.52 2.52 0 0 1-3.5 0 2.47 2.47 0 0 1 0-3.5l3.88-3.88a1 1 0 0 0-1.42-1.42l-3.88 3.89a4.48 4.48 0 0 0 6.33 6.33l3.89-3.88a1 1 0 1 0-1.42-1.42Zm8.58-12.08a4.49 4.49 0 0 0-6.33 0l-3.89 3.88a1 1 0 0 0 1.42 1.42l3.88-3.88a2.52 2.52 0 0 1 3.5 0 2.47 2.47 0 0 1 0 3.5l-3.88 3.88a1 1 0 1 0 1.42 1.42l3.88-3.89a4.49 4.49 0 0 0 0-6.33ZM8.83 15.17a1 1 0 0 0 1.1.22 1 1 0 0 0 .32-.22l4.92-4.92a1 1 0 0 0-1.42-1.42l-4.92 4.92a1 1 0 0 0 0 1.42Z"></path></svg></span><span class="sr-only">Section titled “Canvas 和 Windows”</span></a></div>
<p>如果在同一个 Windows 进程中同时使用 <code dir="auto">canvas</code> 和 <code dir="auto">sharp</code> 模块，可能会发生以下错误：</p>
<div class="expressive-code"><figure class="frame not-content"><figcaption class="header"></figcaption><pre data-language="plaintext"><code><div class="ec-line"><div class="code"><span style="--0:#d6deeb;--1:#403f53">The specified procedure could not be found.</span></div></div></code></pre><div class="copy"><button title="Copy to clipboard" data-copied="Copied!" data-code="The specified procedure could not be found."><div></div></button></div></figure></div> </div> <footer class="sl-flex astro-3yyafb3n"> <div class="meta sl-flex astro-3yyafb3n">   </div> <div class="pagination-links print:hidden astro-u2l5gyhi" dir="ltr"> <a href="/" rel="prev" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17 11H9.41l3.3-3.29a1.004 1.004 0 1 0-1.42-1.42l-5 5a1 1 0 0 0-.21.33 1 1 0 0 0 0 .76 1 1 0 0 0 .21.33l5 5a1.002 1.002 0 0 0 1.639-.325 1 1 0 0 0-.219-1.095L9.41 13H17a1 1 0 0 0 0-2Z"/></svg> <span class="astro-u2l5gyhi"> 上一页 <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">首页</span> </span> </a> <a href="/api-constructor/" rel="next" class="astro-u2l5gyhi"> <svg aria-hidden="true" class="astro-u2l5gyhi astro-c6vsoqas" width="16" height="16" viewBox="0 0 24 24" fill="currentColor" style="--sl-icon-size: 1.5rem;"><path d="M17.92 11.62a1.001 1.001 0 0 0-.21-.33l-5-5a1.003 1.003 0 1 0-1.42 1.42l3.3 3.29H7a1 1 0 0 0 0 2h7.59l-3.3 3.29a1.002 1.002 0 0 0 .325 1.639 1 1 0 0 0 1.095-.219l5-5a1 1 0 0 0 .21-.33 1 1 0 0 0 0-.76Z"/></svg> <span class="astro-u2l5gyhi"> 下一页 <br class="astro-u2l5gyhi"> <span class="link-title astro-u2l5gyhi">构造函数</span> </span> </a> </div>   </footer>  </div> </div>   </main> </div> </div>  </div> </div>  </body></html>